# SPEC

## 現在の実装状態
- 本リポジトリは教科書プロジェクトの骨組みを提供する。
- `logic_tower` / `math_tower` / `physics_tower` / `db_tower` に章構成を配置済み。
- 基本方針はスケルトン起点だが、`physics_tower` は `physics_tower/PROGRESS.md` のキュー順に本文拡充（教科書化）を進める。

## 運用ルール
- 目次タワーにない章やファイルは勝手に追加しない。
- 入口ページは `00_overview.md` 優先、なければ `README.md` を使用する。
- ディレクトリのみ指定の場所は `README.md` を入口として先に配置し、必要なら `.gitkeep` を補助的に使う。
- リンクは相対パスで管理し、リンク切れを作らない。
- PR作成後はレビュー指摘と基本チェックを反映し、`SPEC.md` と実装内容に矛盾がないことを確認できた場合は **必ず同一タスク内で `main` へマージ完了まで実施**する（PR作成のみで終了しない）。

### Physicsタワー本文の数式規約
- 数式は原則として独立行のブロック数式（`$$...$$`）で記述し、文章中のTeX埋め込みを避ける。
- 上記の数式ルールは全セクション共通とし、演習問題・演習解答・箇条書き・章末まとめでも独立ブロックを維持する。
- 行列を扱う数式は `\begin{pmatrix}...\end{pmatrix}` を同一ブロック数式内で完結させ、閉じタグ欠落や途中分断を禁止する。
- `\end{pmatrix}` / `\end{vmatrix}` の直後に `=` が続く場合は同一行（例: `...\end{pmatrix}=...`）で記述し、Markdown見出し誤解釈を避ける。
- 数式中の `=` の直前で改行しない（`=` は前行末尾へ置く）。

### Physicsタワー執筆フロー（引き継ぎ可能な運用）
- 本文執筆は毎回 **1ファイルだけ** 実施する（`PROGRESS.md` の先頭 `TODO` または `DOING` 優先）。
- ユーザー指示が「次をお願いします」または「progressmdをみて続きに当たるmd教科書を作る」の場合も、同じルールで `PROGRESS.md` に従って1件のみ本文化する。
- 新しい章（新フォルダ）に突入するタイミングでは、先にその章の学習導線を設計し、**子mdを3ファイル以上スケルトン作成**してから本文執筆を開始する。
- 上記の「子mdを3件以上」ルールは `physics_tower` 配下の**すべての章フォルダ**（例: `01_dynamics`, `02_electromagnetism`, `03_analytical_mechanics` ...）に適用し、各章のサブフォルダで不足があれば本文化前にスケルトンを補完する。
- 新章の `README.md` は単なるリンク集にせず、初心者向けの目的・読み方・主要トピック・子md案内を含む本文として整備する。
- 本文化は「導入→導出→例題→誤りやすい点→まとめ」の流れを基本とし、次回の担当AIが継続しやすいように、`PROGRESS.md` の `notes` に実施内容を明記する。
- 上記フローと矛盾する古い運用記述は採用しない（常にこの節を最新の基準とする）。
